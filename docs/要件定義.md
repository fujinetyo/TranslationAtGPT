# ゲーム画面・逐次翻訳プログラム：要件定義書

## 1. 概要
Windows上で動作する常駐アプリケーション。  
ユーザーがボタンを押すと対象のゲーム画面をスクリーンショットとして取得し、OpenAI API に画像を送信。  
OCR（英文抽出）＋翻訳を行い、結果をユーザーへ即座に表示する。

---

## 2. 想定ユースケース
- ゲーム内の字幕や UI に表示される英文を即座に日本語訳したい  
- 画面中のテキストが背景に溶け込んでいて OCR しづらい場合、高精度モデルを選択して精度向上  
- ゲームのプレイ中に最小限の操作で翻訳を行いたい

---

## 3. 機能要件

### 3.1 基本機能（Version 1.0 実装済み）
- ✅ ウィンドウ一覧の取得と選択  
- ✅ 選択したウィンドウのスクリーンショット取得  
- ✅ スクリーンショットを OpenAI 画像入力 API へ送信  
- ✅ OCR（画像内テキスト抽出）  
- ✅ 翻訳（多言語 → 日本語）  
- ✅ 翻訳結果の表示（専用ウィンドウ）
- ✅ キャプチャ画像のサムネイル表示
- ✅ キャプチャ画像の自動保存

### 3.2 モデル選択機能
- ✅ **GPT-4o mini**（軽量・低コスト）使用
- 🔄 **GPT-4o**（高精度）への切替機能（将来実装予定）

### 3.3 設定関連
- ✅ 使用する OpenAI API Key の登録（settings.ini）  
- ✅ デフォルトプロンプトの設定
- ✅ 追加プロンプトの入力機能  
- ✅ スクリーンショット自動縮小（2000px以上の場合）  
- 🔄 ダークモード（将来実装予定）
- 🔄 ホットキー登録（将来実装予定）

### 3.4 翻訳結果の出力形式
- ✅ テキスト表示（TextBox）  
- ✅ コピー＆ペースト可能  
- 🔄 履歴保存機能（将来実装予定）

---

## 4. 非機能要件

### 4.1 パフォーマンス
- スクリーンショット取得〜翻訳完了まで 1〜3 秒程度を目標  
- 低負荷で常駐可能であること

### 4.2 信頼性
- API 通信エラー発生時の再送処理  
- API Key 不正 / 残高不足のエラー表示  
- モデル切替時の正常動作

### 4.3 セキュリティ
- API Key を暗号化してローカル保存  
- 通信は HTTPS で行う  
- 画像データは送信後速やかに破棄（必要に応じてオプション）

---

## 5. 使用技術（候補）
- **開発言語**：C# (.NET), Python, C++ など  
- **スクリーンショット取得**：Win32 API / GDI+ / DirectX キャプチャ  
- **UI**：WPF / WinUI / QT / Electron  
- **API 通信**：HTTP(S) / multipart-form upload  
- **OpenAI API**：GPT-4o / GPT-4o-mini（Vision対応モデル）

---

## 6. 想定 API の利用フロー
1. 画像（png/jpg）を生成  
2. ユーザーの選択したモデルへ POST  
3. OCR＋翻訳のプロンプトを添付  
4. 結果（テキスト）を受信  
5. プログラム側で整形し、画面に表示

---

## 7. コスト計算（簡易）
- 軽量モデル（GPT-4o mini）なら  
  - 1回あたり 0.02円以下  
  - 1万回翻訳しても数百円程度  
- 高精度モデル（GPT-4o）なら  
  - 1回あたり 0.4〜0.5円程度  
  - 1万回で数千円規模

---

## 8. 制限事項
- オンラインゲームや配信画面など、著作権的に注意が必要な画像を自動送信する場合の扱い  
- API 利用は従量課金であるため、長時間連続使用時は注意  
- モデルの特性上、完全な OCR 精度は保証できない

